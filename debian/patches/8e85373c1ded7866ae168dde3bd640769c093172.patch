From 8e85373c1ded7866ae168dde3bd640769c093172 Mon Sep 17 00:00:00 2001
From: Dimitri John Ledkov <xnox@ubuntu.com>
Date: Wed, 16 Mar 2016 21:53:20 +0000
Subject: [PATCH] Add support for s390[x].

Requires-spl: refs/pull/537/head
Signed-off-by: Dimitri John Ledkov <xnox@ubuntu.com>
---
 lib/libspl/include/sys/isa_defs.h | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

diff --git a/lib/libspl/include/sys/isa_defs.h b/lib/libspl/include/sys/isa_defs.h
index 60c6a3b..c1ee0b6 100644
--- a/lib/libspl/include/sys/isa_defs.h
+++ b/lib/libspl/include/sys/isa_defs.h
@@ -157,7 +157,21 @@ extern "C" {
 #endif
 #endif
 
-#else /* Currently x86_64, i386, arm, powerpc, and sparc are supported */
+/* s390 arch specific defines */
+#elif defined(__s390__)
+#if defined(__s390x__)
+#if !defined(_LP64)
+#define	_LP64
+#endif
+#else
+#if !defined(_ILP32)
+#define	_ILP32
+#endif
+#endif
+
+#define	_BIG_ENDIAN
+
+#else /* Currently x86_64, i386, arm, powerpc, s390, and sparc are supported */
 #error "Unsupported ISA type"
 #endif
 
